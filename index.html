<html style="overflow:hidden;">
<head>
<title>Tally</title>
<link rel="icon" href="favicon.ico" type="image/x-icon">
<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' name='viewport' />
<meta name="viewport" content="width=device-width" />
<link href='https://fonts.googleapis.com/css?family=Fredoka+One' rel='stylesheet' type='text/css'>
<script>
var count = 0;
var sec = 0;
var setSec = 0;
var timer = false;
var blink = false;
var showTimer = true;
var stop = false;

function counter() {
  document.getElementById("counter").innerHTML = ++count;
}

function reset() {
  count = 0;
  document.getElementById("counter").innerHTML = count;
}

function minute() {
  if (!timer) {
    sec += 60;
    setSec = sec;
    setTime();
    timerUtil();
  }
}

function second() {
  if (!timer) {
    sec++;
    setSec = sec;
    setTime();
    timerUtil();
  }
}

function setTime() {
  document.getElementById("minute").innerHTML = Math.floor(sec / 60);
  document.getElementById("second").innerHTML = pad(sec % 60, 2);
}

function startTimer() {
  if (stop) {
    timerUtil();
  } else {
    stop = true;
    document.getElementById("start").innerHTML = "Stop";
    if (setSec > 0)
      timer = setInterval(function () {
        if (sec != 0) {
          sec--;
          setTime();
          if (sec == 0) {
            timerUtil();
            blinker();
          }
        }
      }, 1000);
    else
      timer = setInterval(function () {
        sec++;
        setTime();
      }, 1000);
  }
}

function resetTimer(x) {
  sec = x;
  timerUtil();
  setTime();
}

function timerUtil() {
  stop = false;
  document.getElementById("start").innerHTML = "Start";
  if (timer) {
    clearInterval(timer);
    timer = false;
  }
  if (blink) {
    clearInterval(blink);
    blink = false;
    showTimer = true;
    document.getElementById("time").style.visibility = "visible";
  }
}

function blinker() {
  blink = setInterval(function () {
    if (showTimer) {
      showTimer = false;
      document.getElementById("time").style.visibility = "hidden";
    } else {
      showTimer = true;
      document.getElementById("time").style.visibility = "visible";
    }
  }, 500);
}

function pad(n, width, z) {
  z = z || '0';
  n = n + '';
  return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;
}

window.onload = function () {
  resize();
}

function resize() {
  var text = document.getElementsByClassName('text');
  for (var i = 0; i < text.length; ++i)
    text[i].style.fontSize = document.body.clientHeight * .05;
    
  var number = document.getElementsByClassName('number');
  for (var i = 0; i < number.length; ++i) {
    number[i].style.fontSize = document.body.clientHeight * .25;
    number[i].style.lineHeight = document.body.clientHeight / 2 + "px";
  }
}
</script>
<style>
::selection {
  background: black;
}
::-moz-selection {
  background: black;
}
body {
  position:relative;
  overflow:hidden;
  background-color:black;
  color:white;
  font-family:Fredoka One;
  text-align:center;
  padding:0px;
  margin:0px;
  text-align:center;
}
#tally {
  position:absolute;
  width:100%;
  height:50%;
  bottom:0px;
}
#timer {
  position:absolute;
  width:100%;
  height:50%;
}
.text {
  position:absolute;
  bottom:0px;
  width:100%;
}
</style>
</head>
<body onresize="resize()">
<div id="timer">
  <div id="time" class="number"><span id="minute" onClick="minute()">0</span>:<span id="second" onClick="second()">00</span></div>
  <div class="text"><span id="start" onClick="startTimer()">Start</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span onClick="resetTimer(setSec)">Reset</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span onClick="resetTimer(0)">Clear</span></div>
</div>
<hr style="position:absolute;line-height:0;top:50%;width:100%;" />
<div id="tally">
  <div id="counter" onClick="counter()" class="number">0</div>
  <div onClick="reset()" class="text">Reset</div>
</div>
</body>
</html>